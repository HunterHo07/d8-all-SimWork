(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{4680:(e,s,t)=>{Promise.resolve().then(t.bind(t,4879))},4879:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>u});var r=t(5155),i=t(2115),a=t(6874),l=t.n(a),n=t(5396),c=t(5717),d=t(7294),o=t(285),x=t(6695),m=t(8001),h=t(9434);function u(){let{user:e,isAuthenticated:s,isLoading:t}=(0,c.A)(),[a,u]=(0,i.useState)([]),[f,j]=(0,i.useState)([]),[p,v]=(0,i.useState)([]),[g,N]=(0,i.useState)(!0);if((0,i.useEffect)(()=>{let r=async()=>{if(s&&e)try{N(!0);let s=await d.cB.getAll();u(s),j(s.slice(0,3));let t=await d.LP.getUserAnalytics(e.id);v(t)}catch(e){console.error("Error fetching dashboard data:",e)}finally{N(!1)}};s&&!t&&r()},[s,t,e]),t||g)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"}),(0,r.jsx)("p",{className:"mt-4 text-lg",children:"Loading your dashboard..."})]})});if(!s)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center px-4",children:(0,r.jsx)(x.Zp,{variant:"futuristic",className:"max-w-md w-full",children:(0,r.jsxs)(x.Wu,{className:"p-8 text-center",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Access Denied"}),(0,r.jsx)("p",{className:"text-gray-400 mb-6",children:"You need to be logged in to view this page."}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,r.jsx)(l(),{href:"/login",children:(0,r.jsx)(o.$,{variant:"futuristic",className:"w-full",children:"Sign In"})}),(0,r.jsx)(l(),{href:"/register",children:(0,r.jsx)(o.$,{variant:"outline",className:"w-full",children:"Create Account"})})]})]})})});let y=p.length,b=p.length>0?p.reduce((e,s)=>e+s.total_score,0)/p.length:0,w=p.reduce((e,s)=>e+s.completion_time,0),k=Math.floor(w/3600),C=Math.floor(w%3600/60);return(0,r.jsx)("div",{className:"min-h-screen py-20 px-4",children:(0,r.jsxs)("div",{className:"container mx-auto",children:[(0,r.jsxs)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:[(0,r.jsxs)("h1",{className:"text-3xl md:text-4xl font-bold mb-2",children:["Welcome back, ",(null==e?void 0:e.name)||"User"]}),(0,r.jsx)("p",{className:"text-gray-400",children:"Track your progress and continue your training journey."})]}),(0,r.jsxs)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12",children:[(0,r.jsx)(x.Zp,{variant:"futuristic",children:(0,r.jsx)(x.Wu,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-400",children:"Completed Scenarios"}),(0,r.jsx)("h3",{className:"text-3xl font-bold",children:y})]}),(0,r.jsx)("div",{className:"w-12 h-12 rounded-full bg-indigo-500/20 flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]})})}),(0,r.jsx)(x.Zp,{variant:"futuristic",children:(0,r.jsx)(x.Wu,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-400",children:"Average Score"}),(0,r.jsx)("h3",{className:"text-3xl font-bold",children:(0,h.y)(b)})]}),(0,r.jsx)("div",{className:"w-12 h-12 rounded-full bg-purple-500/20 flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})})]})})}),(0,r.jsx)(x.Zp,{variant:"futuristic",children:(0,r.jsx)(x.Wu,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-400",children:"Time Spent"}),(0,r.jsxs)("h3",{className:"text-3xl font-bold",children:[k,"h ",C,"m"]})]}),(0,r.jsx)("div",{className:"w-12 h-12 rounded-full bg-pink-500/20 flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-pink-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})})}),(0,r.jsx)(x.Zp,{variant:"futuristic",children:(0,r.jsx)(x.Wu,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-400",children:"Available Scenarios"}),(0,r.jsx)("h3",{className:"text-3xl font-bold",children:a.length})]}),(0,r.jsx)("div",{className:"w-12 h-12 rounded-full bg-blue-500/20 flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})})]})})})]}),(0,r.jsxs)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"mb-12",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold",children:"Recent Scenarios"}),(0,r.jsx)(l(),{href:"/scenarios",children:(0,r.jsx)(o.$,{variant:"outline",size:"sm",children:"View All"})})]}),f.length>0?(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map(e=>(0,r.jsx)(m.A,{scenario:e},e.id))}):(0,r.jsx)(x.Zp,{variant:"futuristic",children:(0,r.jsxs)(x.Wu,{className:"p-8 text-center",children:[(0,r.jsx)("p",{className:"text-gray-400 mb-4",children:"No scenarios available yet."}),(0,r.jsx)(l(),{href:"/scenarios",children:(0,r.jsx)(o.$,{variant:"futuristic",children:"Browse Scenarios"})})]})})]}),(0,r.jsxs)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Recent Activity"}),p.length>0?(0,r.jsx)(x.Zp,{variant:"futuristic",children:(0,r.jsx)(x.Wu,{className:"p-0",children:(0,r.jsx)("div",{className:"divide-y divide-gray-800",children:p.slice(0,5).map(e=>(0,r.jsxs)("div",{className:"p-4 flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium",children:e.scenario}),(0,r.jsxs)("p",{className:"text-sm text-gray-400",children:["Completed on ",(0,h.Yq)(e.completed_at)]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("p",{className:"font-bold",children:(0,h.y)(e.total_score)}),(0,r.jsxs)("p",{className:"text-sm text-gray-400",children:[Math.floor(e.completion_time/60)," minutes"]})]})]},e.id))})})}):(0,r.jsx)(x.Zp,{variant:"futuristic",children:(0,r.jsxs)(x.Wu,{className:"p-8 text-center",children:[(0,r.jsx)("p",{className:"text-gray-400 mb-4",children:"No activity recorded yet."}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Complete scenarios to see your activity here."}),(0,r.jsx)(l(),{href:"/scenarios",children:(0,r.jsx)(o.$,{variant:"futuristic",children:"Start a Scenario"})})]})})]})]})})}},6695:(e,s,t)=>{"use strict";t.d(s,{BT:()=>d,Wu:()=>o,ZB:()=>c,Zp:()=>l,aR:()=>n,wL:()=>x});var r=t(5155),i=t(2115),a=t(9434);let l=i.forwardRef((e,s)=>{let{className:t,variant:i="default",...l}=e;return(0,r.jsx)("div",{ref:s,className:(0,a.cn)("rounded-xl",{default:"bg-card text-card-foreground shadow",futuristic:"bg-black/80 text-white border border-indigo-500/50 shadow-glow-blue backdrop-blur-sm",glass:"bg-white/10 text-white border border-white/20 backdrop-blur-md shadow-lg",outline:"bg-transparent border border-border shadow-sm",dark:"bg-black/90 text-white border border-gray-800 shadow-xl"}[i],t),...l})});l.displayName="Card";let n=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,r.jsx)("div",{ref:s,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",t),...i})});n.displayName="CardHeader";let c=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,r.jsx)("h3",{ref:s,className:(0,a.cn)("font-semibold leading-none tracking-tight",t),...i})});c.displayName="CardTitle";let d=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,r.jsx)("p",{ref:s,className:(0,a.cn)("text-sm text-muted-foreground",t),...i})});d.displayName="CardDescription";let o=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,r.jsx)("div",{ref:s,className:(0,a.cn)("p-6 pt-0",t),...i})});o.displayName="CardContent";let x=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,r.jsx)("div",{ref:s,className:(0,a.cn)("flex items-center p-6 pt-0",t),...i})});x.displayName="CardFooter"},8001:(e,s,t)=>{"use strict";t.d(s,{A:()=>m});var r=t(5155),i=t(2115),a=t(6874),l=t.n(a),n=t(6766),c=t(5396),d=t(9434),o=t(285),x=t(6695);function m(e){let{scenario:s}=e,[t,a]=(0,i.useState)(!1),m=(0,i.useRef)(null),h=s.cover_image?"http://127.0.0.1:8090/api/files/scenarios/".concat(s.id,"/").concat(s.cover_image):"/images/scenario-".concat(s.category,".jpg");return(0,i.useEffect)(()=>{if(!m.current)return;let e=m.current,s=s=>{if(!t)return;let r=e.getBoundingClientRect(),i=s.clientX-r.left,a=s.clientY-r.top,l=r.width/2,n=r.height/2;e.style.transform="perspective(1000px) rotateX(".concat((a-n)/10,"deg) rotateY(").concat((l-i)/10,"deg) scale3d(1.05, 1.05, 1.05)")},r=()=>{e.style.transform="perspective(1000px) rotateX(0) rotateY(0) scale3d(1, 1, 1)"};return e.addEventListener("mousemove",s),e.addEventListener("mouseleave",r),()=>{e.removeEventListener("mousemove",s),e.removeEventListener("mouseleave",r)}},[t]),(0,r.jsx)(c.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},whileHover:{z:10},onHoverStart:()=>a(!0),onHoverEnd:()=>a(!1),ref:m,children:(0,r.jsxs)(x.Zp,{variant:"futuristic",className:"overflow-hidden h-full transition-all duration-300 ease-out",children:[(0,r.jsxs)("div",{className:"relative h-48",children:[(0,r.jsx)(n.default,{src:h,alt:s.title,fill:!0,className:"object-cover"}),(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/50 to-transparent"}),(0,r.jsxs)("div",{className:"absolute top-4 left-4 flex gap-2",children:[(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat((0,d.J8)(s.difficulty)),children:s.difficulty.charAt(0).toUpperCase()+s.difficulty.slice(1)}),(0,r.jsx)("span",{className:"px-2 py-1 rounded-full bg-gray-800 text-xs font-medium",children:(0,d.a3)(s.duration)})]}),(0,r.jsx)("div",{className:"absolute bottom-4 left-4",children:(0,r.jsx)("h3",{className:"text-xl font-bold text-white",children:s.title})})]}),(0,r.jsxs)(x.Wu,{className:"p-4",children:[(0,r.jsx)("p",{className:"text-gray-300 text-sm mb-4 line-clamp-2",children:s.description}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-8 h-8 rounded-full bg-indigo-500/20 flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-4 h-4 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),(0,r.jsx)("span",{className:"text-sm text-gray-400 capitalize",children:s.category.replace("_"," ")})]}),(0,r.jsx)(l(),{href:"/scenarios/".concat(s.id),children:(0,r.jsx)(o.$,{variant:"futuristic",size:"sm",children:"Start"})})]})]})]})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[595,212,355,441,684,358],()=>s(4680)),_N_E=e.O()}]);